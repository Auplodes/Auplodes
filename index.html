<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Auplodes | Direct Cloud</title>
    <script src="https://ucarecdn.com/libs/widget/3.x/uploadcare.full.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap');
        :root { --blue: #007bff; --dark: #0d0e10; --card: #1a1c1e; --border: #33383e; --text: #ffffff; }
        body { background-color: var(--dark); color: var(--text); font-family: 'Inter', sans-serif; margin: 0; }

        header { background: #16181a; padding: 15px 5%; display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid var(--border); }
        .logo { font-size: 22px; font-weight: 700; color: var(--blue); }
        .container { max-width: 800px; margin: 20px auto; padding: 0 15px; }

        #dashboard { display: none; }
        .upload-card { background: var(--card); padding: 30px; border-radius: 15px; border: 2px dashed var(--border); text-align: center; margin-bottom: 25px; }
        
        .file-list { background: var(--card); border-radius: 12px; border: 1px solid var(--border); overflow: hidden; }
        table { width: 100%; border-collapse: collapse; }
        td { padding: 14px 12px; border-bottom: 1px solid var(--border); font-size: 14px; }
        
        .btn-copy { background: var(--blue); color: white; border: none; padding: 8px 12px; border-radius: 5px; cursor: pointer; font-weight: bold; }
        .btn-del { background: #ff4d4d; color: white; border: none; padding: 8px 12px; border-radius: 5px; cursor: pointer; margin-left: 5px; }

        .login-box { background: var(--card); padding: 30px; border-radius: 15px; max-width: 350px; margin: 50px auto; text-align: center; }
        input { width: 100%; padding: 12px; margin-bottom: 15px; background: #08090a; border: 1px solid var(--border); color: white; border-radius: 8px; box-sizing: border-box; }
        .btn-login { width: 100%; padding: 12px; background: var(--blue); color: white; border: none; border-radius: 8px; font-weight: bold; cursor: pointer; }
    </style>
</head>
<body>

    <header><div class="logo">Au<span>plodes</span></div><div id="user-nav"></div></header>

    <div class="container">
        <div id="login-section" class="login-box">
            <h2>Admin Login</h2>
            <input type="text" id="user" placeholder="Username">
            <button class="btn-login" onclick="doLogin()">Enter Dashboard</button>
        </div>

        <div id="dashboard">
            <div class="upload-card">
                <h3>Direct Upload</h3>
                <input type="hidden" role="uploadcare-uploader" data-public-key="d2dac43b0699b5b058d8" id="uploader" />
            </div>

            <h3>üìÅ My Files (Direct Links)</h3>
            <div class="file-list">
                <table><tbody id="list-body"></tbody></table>
            </div>
        </div>
    </div>

    <script>
        window.onload = () => {
            if(localStorage.getItem('au_user')) { openDash(); renderFiles(); }
        }

        function doLogin() {
            localStorage.setItem('au_user', document.getElementById('user').value);
            openDash(); renderFiles();
        }

        function openDash() {
            document.getElementById('login-section').style.display = 'none';
            document.getElementById('dashboard').style.display = 'block';
        }

        const widget = uploadcare.Widget('#uploader');
        widget.onUploadComplete(i => {
            let files = JSON.parse(localStorage.getItem('au_files') || '[]');
            // YE HAI DIRECT DOWNLOAD LINK FORMAT
            const directLink = `https://ucarecdn.com/${i.uuid}/-/inline/no/${encodeURIComponent(i.name)}`;
            
            files.unshift({ uid: Date.now(), name: i.name, link: directLink });
            localStorage.setItem('au_files', JSON.stringify(files));
            renderFiles();
        });

        function renderFiles() {
            const files = JSON.parse(localStorage.getItem('au_files') || '[]');
            document.getElementById('list-body').innerHTML = files.map(f => `
                <tr>
                    <td><div style="width:180px; overflow:hidden; text-overflow:ellipsis; white-space:nowrap;">üìÑ ${f.name}</div></td>
                    <td style="text-align:right;">
                        <button class="btn-copy" onclick="copy('${f.link}')">Copy Link</button>
                        <button class="btn-del" onclick="del(${f.uid})">X</button>
                    </td>
                </tr>
            `).join('');
        }

        function del(id) {
            let files = JSON.parse(localStorage.getItem('au_files') || '[]').filter(x => x.uid !== id);
            localStorage.setItem('au_files', JSON.stringify(files));
            renderFiles();
        }

        function copy(url) {
            navigator.clipboard.writeText(url);
            alert("Direct Link Copied! Paste it anywhere to download.");
        }
    </script>
</body>
</html>
